version: 0.2
phases:
  install:
    runtime-versions:
      nodejs: 12
    commands:
      - "echo copy variables"
      #- aws s3 cp s3://barakah-dev-env/env .
      #- mv env .env
      - ls -la $CODEBUILD_SRC_DIR
      - pwd $CODEBUILD_SRC_DIR
      #- cat .env
      - echo Installing Typeceript...
      - npm install -g typescript@4.2.4
  pre_build: 
    commands: 
      - "echo Installing source NPM dependencies..."
      - npm install 
      # Snyk auth
      #- "npm install bcrypt@5.0.0"
      #- "npm i @hapi/hapi"
      #- "npm i hapi-swagger"
      #- npm install -g
      - export NODE_OPTIONS=--max_old_space_size=4096
      
  build:
    commands:
      - echo Build started on `date`
      #- npm install 
      - tsc
  post_build:
    commands:
      
      - echo Build completed on `date`
# Include only the files required for your application to run.
artifacts:
  files:
    - '**/*'
